{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\truba\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\\\u0434\\u0435\\u043B\\u043E\\u0439 \\u043A\\u0443\\u043F\\u0438 \\u043F\\u043E\\u0434\\u0430\\u0440\\u0438 \\u0434\\u0430\\u0439\\\\web-plus-docker-and-compose\\\\frontend\\\\src\\\\components\\\\header\\\\header.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport { NavLink, useHistory, useLocation } from 'react-router-dom';\nimport logo from '../../images/icons/logo.svg';\nimport giftIcon from '../../images/icons/gift.svg';\nimport likeIcon from '../../images/icons/like.svg';\nimport profileIcon from '../../images/icons/profile.svg';\nimport { Button } from '../ui/button/button';\nimport { Textarea } from '../ui';\nimport { UserContext } from '../../utils/context';\nimport { Modal } from '../ui/modal/modal';\nimport { Input } from '../ui/input/input';\nimport styles from './header.module.css';\nimport { logoutUser, sendCard } from '../../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Header = _ref => {\n  _s();\n\n  let {\n    extraClass = ''\n  } = _ref;\n  const [userCtx, setUserCtx] = React.useContext(UserContext);\n  const [isProfilePopupOpen, setIsProfilePopupOpen] = React.useState(false);\n  const [isGiftPopupOpen, setIsGiftPopupOpen] = React.useState(false);\n  const [giftData, setGiftData] = React.useState({});\n  const history = useHistory();\n  const current = useLocation();\n  const isLoggedIn = !!(userCtx !== null && userCtx !== void 0 && userCtx.id);\n\n  const onSubmit = () => {\n    if (isLoggedIn) {\n      handleGiftPopupOpen();\n    } else {\n      history.push('/signin');\n    }\n  };\n\n  const onChangeInput = e => {\n    e.preventDefault();\n    setGiftData({ ...giftData,\n      [e.target.name]: e.target.name === \"price\" ? parseInt(e.target.value) : e.target.value\n    });\n    console.log(giftData);\n  };\n\n  const submitGift = e => {\n    e.preventDefault();\n    sendCard(giftData).then(() => setIsGiftPopupOpen(false)).then(history.replace({\n      pathname: '/wishlist'\n    }));\n  };\n\n  const handleProfilePopupOpen = () => {\n    setIsProfilePopupOpen(true);\n  };\n\n  const handleGiftPopupOpen = () => {\n    setIsGiftPopupOpen(true);\n  };\n\n  const handlePopupClose = () => {\n    isProfilePopupOpen && setIsProfilePopupOpen(false);\n    isGiftPopupOpen && setIsGiftPopupOpen(false);\n  };\n\n  const logout = () => {\n    logoutUser();\n    setUserCtx(null);\n    handlePopupClose();\n    history.push({\n      pathname: \"/\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: `${styles.header} ${extraClass}`,\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      className: styles.nav,\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.logo,\n        src: logo,\n        alt: \"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(HeaderLinks, {\n      handleProfilePopupOpen: handleProfilePopupOpen,\n      userName: userCtx.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      kind: \"primary\",\n      text: `${isLoggedIn ? 'Добавить подарок' : 'Войти в профиль'}`,\n      onClick: onSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), isProfilePopupOpen && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: handlePopupClose,\n      extraClass: styles.modal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.popup,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `text text_type_button text_color_primary ${styles.popup_btn} ${styles.logout}`,\n          type: \"button\",\n          onClick: logout,\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/profile\",\n          className: `text text_type_button text_color_primary ${styles.popup_btn} ${styles.edit}`,\n          onClick: handlePopupClose,\n          children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), isGiftPopupOpen && /*#__PURE__*/_jsxDEV(Modal, {\n      onClose: handlePopupClose,\n      extraClass: styles.gift_modal,\n      isCloseBtn: true,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.gift_form,\n        onSubmit: submitGift,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text text_type_h2 mb-16\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          id: 20,\n          extraClass: \"mb-12\",\n          label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\",\n          name: \"name\",\n          onChange: onChangeInput,\n          placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"url\",\n          id: 21,\n          extraClass: \"mb-12\",\n          name: \"link\",\n          label: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\",\n          onChange: onChangeInput,\n          placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"url\",\n          id: 22,\n          extraClass: \"mb-12\",\n          name: \"image\",\n          onChange: onChangeInput,\n          label: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430\",\n          placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n          name: \"description\",\n          id: 23,\n          placeholder: \"\\u041D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u0441\\u043B\\u043E\\u0432 \\u043E \\u0432\\u0430\\u0448\\u0435\\u043C \\u0436\\u0435\\u043B\\u0430\\u043D\\u0438\\u0438\",\n          label: \"\\u0420\\u0430\\u0441\\u0441\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u043E \\u0432\\u0430\\u0448\\u0435\\u043C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0435\",\n          onChange: onChangeInput,\n          maxLength: 1024\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"number\",\n          name: \"price\",\n          id: 24,\n          extraClass: `mb-16 ${styles.price_input}`,\n          label: \"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0430 (\\u0440\\u0443\\u0431.)\",\n          onChange: onChangeInput,\n          placeholder: \"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          extraClass: styles.gift_btn,\n          text: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\",\n          kind: \"secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"YTr47u4xZjNmnNcpW33y7dBv6g4=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Header;\n\nconst HeaderLinks = _ref2 => {\n  _s2();\n\n  let {\n    handleProfilePopupOpen,\n    userName\n  } = _ref2;\n  const profileLabel = userName ? `Профиль ${userName}` : `Профиль`;\n  const {\n    pathname\n  } = useLocation();\n\n  const setInactive = isActive => {\n    const inactiveClassName = `${styles.nav} ${styles.nav_inactive}`;\n    return isActive ? inactiveClassName : styles.nav;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: styles.nav_box,\n    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(NavLink, {\n        className: setInactive,\n        to: \"/gifts\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: giftIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u043E\\u0432.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type-main text_color_primary ml-3\",\n          children: \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(NavLink, {\n        className: setInactive,\n        to: \"/wishlist\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: likeIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043B\\u0430\\u0439\\u043A\\u0430.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type-main text_color_primary ml-3\",\n          children: \"\\u041C\\u043E\\u0439 \\u0432\\u0438\\u0448\\u043B\\u0438\\u0441\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.nav_link,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.nav,\n        onClick: handleProfilePopupOpen,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profileIcon,\n          alt: \"\\u0418\\u043A\\u043E\\u043D\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main text_color_primary ml-3\",\n          children: profileLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(HeaderLinks, \"qVMqkCpYCjknUqSjfMln5RFSkbo=\", false, function () {\n  return [useLocation];\n});\n\n_c2 = HeaderLinks;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"HeaderLinks\");","map":{"version":3,"sources":["C:/Users/truba/OneDrive/Рабочий стол/делой купи подари дай/web-plus-docker-and-compose/frontend/src/components/header/header.jsx"],"names":["React","NavLink","useHistory","useLocation","logo","giftIcon","likeIcon","profileIcon","Button","Textarea","UserContext","Modal","Input","styles","logoutUser","sendCard","Header","extraClass","userCtx","setUserCtx","useContext","isProfilePopupOpen","setIsProfilePopupOpen","useState","isGiftPopupOpen","setIsGiftPopupOpen","giftData","setGiftData","history","current","isLoggedIn","id","onSubmit","handleGiftPopupOpen","push","onChangeInput","e","preventDefault","target","name","parseInt","value","console","log","submitGift","then","replace","pathname","handleProfilePopupOpen","handlePopupClose","logout","header","nav","modal","popup","popup_btn","line","edit","gift_modal","gift_form","price_input","gift_btn","HeaderLinks","userName","profileLabel","setInactive","isActive","inactiveClassName","nav_inactive","nav_box","nav_link"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { NavLink, useHistory, useLocation } from 'react-router-dom';\r\nimport logo from '../../images/icons/logo.svg';\r\nimport giftIcon from '../../images/icons/gift.svg';\r\nimport likeIcon from '../../images/icons/like.svg';\r\nimport profileIcon from '../../images/icons/profile.svg';\r\nimport { Button } from '../ui/button/button';\r\nimport { Textarea } from '../ui';\r\nimport { UserContext } from '../../utils/context';\r\nimport { Modal } from '../ui/modal/modal';\r\nimport { Input } from '../ui/input/input';\r\nimport styles from './header.module.css';\r\nimport { logoutUser, sendCard } from '../../utils/api';\r\n\r\nexport const Header = ({ extraClass = '' }) => {\r\n  const [userCtx, setUserCtx] = React.useContext(UserContext);\r\n  const [isProfilePopupOpen, setIsProfilePopupOpen] = React.useState(false);\r\n  const [isGiftPopupOpen, setIsGiftPopupOpen] = React.useState(false);\r\n  const [giftData, setGiftData] = React.useState({\r\n\r\n  })\r\n  const history = useHistory();\r\n  const current = useLocation()\r\n  const isLoggedIn = !!userCtx?.id\r\n\r\n  const onSubmit = () => {\r\n    if (isLoggedIn) {\r\n      handleGiftPopupOpen();\r\n    } else {\r\n      history.push('/signin');\r\n    }\r\n  };\r\n\r\n\r\n  const onChangeInput = (e) => {\r\n    e.preventDefault();\r\n    setGiftData({\r\n      ...giftData,\r\n      [e.target.name]: e.target.name === \"price\" ? parseInt(e.target.value) : e.target.value,\r\n    });\r\n    console.log(giftData);\r\n  };\r\n\r\n  const submitGift = (e) => {\r\n    e.preventDefault();\r\n    sendCard(giftData).then(()=>setIsGiftPopupOpen(false)).then(history.replace({ pathname: '/wishlist' }))\r\n  };\r\n\r\n  const handleProfilePopupOpen = () => {\r\n    setIsProfilePopupOpen(true);\r\n  };\r\n\r\n  const handleGiftPopupOpen = () => {\r\n    setIsGiftPopupOpen(true);\r\n  };\r\n\r\n  const handlePopupClose = () => {\r\n    isProfilePopupOpen && setIsProfilePopupOpen(false);\r\n    isGiftPopupOpen && setIsGiftPopupOpen(false);\r\n  };\r\n\r\n  const logout = () => {\r\n    logoutUser()\r\n    setUserCtx(null)\r\n    handlePopupClose()\r\n    history.push({ pathname: \"/\" })\r\n  }\r\n\r\n  return (\r\n    <header className={`${styles.header} ${extraClass}`}>\r\n      <NavLink className={styles.nav} to=\"/\">\r\n        <img className={styles.logo} src={logo} alt=\"Логотип.\" />\r\n      </NavLink>\r\n      {isLoggedIn && <HeaderLinks handleProfilePopupOpen={handleProfilePopupOpen} userName={userCtx.name}/>}\r\n      <Button\r\n        type=\"button\"\r\n        kind=\"primary\"\r\n        text={`${isLoggedIn ? 'Добавить подарок' : 'Войти в профиль'}`}\r\n        onClick={onSubmit}\r\n      />\r\n      {isProfilePopupOpen && (\r\n        <Modal onClose={handlePopupClose} extraClass={styles.modal}>\r\n          <div className={styles.popup}>\r\n            <button\r\n              className={`text text_type_button text_color_primary ${styles.popup_btn} ${styles.logout}`}\r\n              type=\"button\"\r\n              onClick={logout}\r\n            >\r\n              Выйти из профиля\r\n            </button>\r\n            <div className={styles.line} />\r\n            <NavLink\r\n              to=\"/profile\"\r\n              className={`text text_type_button text_color_primary ${styles.popup_btn} ${styles.edit}`}\r\n              onClick={handlePopupClose}\r\n            >\r\n              Редактировать профиль\r\n            </NavLink>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n      {isGiftPopupOpen && (\r\n        <Modal\r\n          onClose={handlePopupClose}\r\n          extraClass={styles.gift_modal}\r\n          isCloseBtn={true}\r\n        >\r\n          <form className={styles.gift_form} onSubmit={submitGift}>\r\n            <h2 className=\"text text_type_h2 mb-16\">Добавить подарок</h2>\r\n            <Input\r\n              type=\"text\"\r\n              id={20}\r\n              extraClass=\"mb-12\"\r\n              label=\"Название подарка\"\r\n              name=\"name\"\r\n              onChange={onChangeInput}\r\n              placeholder=\"Укажите название подарка\"\r\n            />\r\n            <Input\r\n              type=\"url\"\r\n              id={21}\r\n              extraClass=\"mb-12\"\r\n              name=\"link\"\r\n              label=\"Ссылка на магазин\"\r\n              onChange={onChangeInput}\r\n              placeholder=\"Укажите ссылку\"\r\n            />\r\n            <Input\r\n              type=\"url\"\r\n              id={22}\r\n              extraClass=\"mb-12\"\r\n              name=\"image\"\r\n              onChange={onChangeInput}\r\n              label=\"Ссылка на изображение подарка\"\r\n              placeholder=\"Укажите ссылку\"\r\n            />\r\n            <Textarea\r\n              name=\"description\"\r\n              id={23}\r\n              placeholder=\"Несколько слов о вашем желании\"\r\n              label=\"Расскажите о вашем подарке\"\r\n              onChange={onChangeInput}\r\n              maxLength={1024}\r\n            />\r\n            <Input\r\n              type=\"number\"\r\n              name=\"price\"\r\n              id={24}\r\n              extraClass={`mb-16 ${styles.price_input}`}\r\n              label=\"Стоимость подарка (руб.)\"\r\n              onChange={onChangeInput}\r\n              placeholder=\"Укажите стоимость\"\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              extraClass={styles.gift_btn}\r\n              text=\"Добавить подарок\"\r\n              kind=\"secondary\"\r\n            />\r\n          </form>\r\n        </Modal>\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nconst HeaderLinks = ({ handleProfilePopupOpen, userName }) => {\r\n  const profileLabel = userName ? `Профиль ${userName}` : `Профиль`\r\n  const { pathname } = useLocation()\r\n\r\n\r\n  const setInactive = (isActive) => {\r\n    const inactiveClassName = `${styles.nav} ${styles.nav_inactive}`\r\n\r\n    return isActive ? inactiveClassName : styles.nav\r\n  }\r\n\r\n  return (\r\n    <ul className={styles.nav_box}>\r\n      <li className={styles.nav_link}>\r\n        <NavLink className={setInactive} to=\"/gifts\" >\r\n          <img src={giftIcon} alt=\"Иконка подарков.\" />\r\n          <p className=\"text text_type-main text_color_primary ml-3\">Подарки</p>\r\n        </NavLink>\r\n      </li>\r\n      <li className={styles.nav_link}>\r\n        <NavLink className={setInactive} to=\"/wishlist\">\r\n          <img src={likeIcon} alt=\"Иконка лайка.\" />\r\n          <p className=\"text text_type-main text_color_primary ml-3\">\r\n            Мой вишлист\r\n          </p>\r\n        </NavLink>\r\n      </li>\r\n      <li className={styles.nav_link}>\r\n        <button className={styles.nav} onClick={handleProfilePopupOpen}>\r\n          <img src={profileIcon} alt=\"Иконка профиля.\" />\r\n          <p className=\"text text_type_main text_color_primary ml-3\">{profileLabel}</p>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}